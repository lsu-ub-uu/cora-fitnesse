!2 Test of basic actions

It '''should''' be possible to create, read, update, remove, index and search an !-IndexBatchJob-!. The user '''should''' not create an !-IndexBatchJob-! through the create endpoint, but they need to have the permission to do so, because otherwise, they cannot create an !-IndexBatchJob-! through the indexRecordList endpoint.
Currently, we do not have a search defined for !-IndexBatchJobs-!, which is why it is not possible to correctly test the search nor the indexing of !-IndexBatchJobs-!.

!define recordType {indexBatchJob}
!define createData {!-{"name":"indexBatchJob","children":[{"name":"recordInfo","children":[{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}]}]},{"name":"recordTypeToIndex","value":"metadataNumberVariable"},{"name":"totalNumberToIndex","value":"2"},{"name":"numberOfProcessedRecords","value":"0"},{"name":"status","value":"started"}]}-!}
!define updateData {!-{"name":"indexBatchJob","children":[{"name":"recordInfo","children":[{"name":"id","value":"-!${recordId}!-"},{"name":"type","children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"indexBatchJob"}]},{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}]}]},{"name":"filter","children":[{"name":"fromNo","value":"1"},{"name":"toNo","value":"4"}]},{"name":"recordTypeToIndex","value":"metadataTextVariable"},{"name":"totalNumberToIndex","value":"4"},{"name":"numberOfProcessedRecords","value":"0"},{"name":"status","value":"started"}]}-!}
!define expectedCompareResult {OK}

!define currentAuthToken {$adminAuthToken}
!***> '''Create''' an !-IndexBatchJob-! using the create endpoint

!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getCreatedId? | getStatusType? |
| ${currentAuthToken} | indexBatchJob | ${createData} | | $createdId = | CREATED |
!define recordId {$createdId}
*!

!***> '''Read''' the record
!define expectedUpdatedData {${createData}}
!include -seamless .HelperPages.readRecord
Validate the '''response''' returned on the '''read''' call contains the expected record parts.
!include -seamless .HelperPages.compareRecord
*!

!***> '''Update''' the !-IndexBatchJob-!


!| RecordEndpointFixture |
| authToken | type | id | json | testUpdateRecord? |  getStatusType? |
| ${currentAuthToken} | indexBatchJob | ${recordId} | ${updateData} | |  OK |


!***> Read the record and confirm that the update was successful
!define expectedUpdatedData {${updateData}}
!include -seamless .HelperPages.readRecord
Validate the '''response''' returned on the '''read''' call contains the expected record parts.
!include -seamless .HelperPages.compareRecord
*!
*!

!***> '''Delete''' the !-IndexBatchJob-!
!| RecordEndpointFixture |
| authToken | type | id | testDeleteRecord? | getStatusType? |
| ${currentAuthToken} | indexBatchJob | ${recordId} | | OK |
*!