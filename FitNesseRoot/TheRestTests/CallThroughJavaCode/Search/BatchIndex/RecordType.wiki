---
Test
---
!2 Metadata
!3 Fields and constraints:
The list below contains nameInData.

!4 IndexBatchJob
 * indexBatchJob (group)
   * recordInfo (group, 1-1, '''noRestrictions''')
     * id (textVar, 1-1, '''noRestrictions''')
     * type (link, 1-1, '''noRestrictions''')
     * createdBy (link, 1-1, '''noRestrictions''')
     * dataDivider (link, 1-1, '''noRestrictions''')
     * permissionUnit (link, 0-X, '''noRestrictions''')
     * tsCreated (textVar, 1-1, '''noRestrictions''')
     * updated(group, 1-X, '''noRestrictions''')
   * indexBatchJobFilter (group, 0-1, , '''noRestrictions''') 
   * recordTypeToIndex (textVar, 1-1, '''noRestrictions''')
   * totalNumberToIndex (numVar, 0-1, '''noRestrictions''')
   * numberOfProcessedRecords (numVar, 0-1, '''noRestrictions''')
   * batchIndexJobError (group, 0-X, '''noRestrictions''')
   * batchJobStatus (collectionVar, 0-1, '''noRestrictions''')
 
 
 
 
 
!define recordType {indexBatchJob}
!3 !-RecordType-!
!***> read recordType ${recordType}

!| RecordEndpointFixture |
| authToken | type | id | testReadRecord? | getStatusType? |
| $adminAuthToken | recordType | ${recordType} | | OK |
*!

Read the top-level metadatagroup for a '''new''' ${recordType} and check that it has the correct children.

!***> Check the children for ${recordType}NewGroup

Read and store ${recordType}NewGroup for later use

!| RecordEndpointFixture |
| type | id | testReadRecordAndStoreJson? |
| metadataGroup | ${recordType}NewGroup | |

Check children

!| ChildComparerFixture |
| expectedNumberOfChildren | testCheckNumberOfChildren? |
| 7 | OK |

!| MetadataLinkFixture |
| authToken | linkedRecordType | linkedRecordId | getRepeatMin? | getRepeatMax? | getNameInData? | getRecordPartConstraint? |
| $adminAuthToken | metadataGroup | recordInfoAutogeneratedNewGroup | 1 | 1 | recordInfo | noRestrictions |
| $adminAuthToken | metadataGroup | indexBatchJobFilterGroup | 0 | 1 | filter | noRestrictions |
| $adminAuthToken | metadataTextVariable | recordTypeToIndexTextVar | 1 | 1 | recordTypeToIndex | noRestrictions |
| $adminAuthToken | metadataNumberVariable | totalNumberToIndexNumberVar | 0 | 1 | totalNumberToIndex | noRestrictions |
| $adminAuthToken | metadataNumberVariable | numberOfProcessedRecordsNumberVar | 0 | 1 | numberOfProcessedRecords | noRestrictions |
| $adminAuthToken | metadataGroup | batchIndexJobErrorGroup | 0 | X | error | noRestrictions |
| $adminAuthToken | metadataCollectionVariable | batchJobStatusCollectionVar | 0 | 1 | status | noRestrictions |
*!
!***> Check recordInfoAutogeneratedNewGroup

Read and store recordInfoAutogeneratedNewGroup for later use

!| RecordEndpointFixture |
| type | id | testReadRecordAndStoreJson? |
| metadataGroup | recordInfoAutogeneratedNewGroup | |

Check children

!| ChildComparerFixture |
| expectedNumberOfChildren | testCheckNumberOfChildren? |
| 1 | OK |

!| MetadataLinkFixture |
| authToken | linkedRecordType | linkedRecordId | getRepeatMin? | getRepeatMax? | getNameInData? | getRecordPartConstraint? |
| $adminAuthToken | metadataRecordLink | dataDividerLink | 1 | 1 | dataDivider | noRestrictions |

*!

Read the top-level metadatagroup for an '''existing''' ${recordType} and check that it has the correct children.

!***> Check the children for ${recordType}Group

Read and store ${recordType}Group for later use


!| RecordEndpointFixture |
| type | id | testReadRecordAndStoreJson? |
| metadataGroup | ${recordType}Group | |

Check the children

!| ChildComparerFixture |
| expectedNumberOfChildren | testCheckNumberOfChildren? |
| 7 | OK |

!| MetadataLinkFixture |
| authToken | linkedRecordType | linkedRecordId | getRepeatMin? | getRepeatMax? | getNameInData? | getRecordPartConstraint? |
| $adminAuthToken | metadataGroup | recordInfoGroup | 1 | 1 | recordInfo | noRestrictions |
| $adminAuthToken | metadataGroup | indexBatchJobFilterGroup | 0 | 1 | filter | noRestrictions |
| $adminAuthToken | metadataTextVariable | recordTypeToIndexTextVar | 1 | 1 | recordTypeToIndex | noRestrictions |
| $adminAuthToken | metadataNumberVariable | totalNumberToIndexNumberVar | 0 | 1 | totalNumberToIndex | noRestrictions |
| $adminAuthToken | metadataNumberVariable | numberOfProcessedRecordsNumberVar | 0 | 1 | numberOfProcessedRecords | noRestrictions |
| $adminAuthToken | metadataGroup | batchIndexJobErrorGroup | 0 | X | error | noRestrictions |
| $adminAuthToken | metadataCollectionVariable | batchJobStatusCollectionVar | 0 | 1 | status | noRestrictions |
*!
!***> Check recordInfoGroup

Read and store recordInfoGroup for later use

!| RecordEndpointFixture |
| type | id | testReadRecordAndStoreJson? |
| metadataGroup | recordInfoGroup | |

Check the children

!| ChildComparerFixture |
| expectedNumberOfChildren | testCheckNumberOfChildren? |
| 7 | OK |

!| MetadataLinkFixture |
| authToken | linkedRecordType | linkedRecordId | getRepeatMin? | getRepeatMax? | getNameInData? | getRecordPartConstraint? |
| $adminAuthToken | metadataTextVariable | idTextVar | 1 | 1 | id | noRestrictions |
| $adminAuthToken | metadataRecordLink | recordTypeLink | 1 | 1 | type | noRestrictions |
| $adminAuthToken | metadataRecordLink | createdByLink | 1 | 1 | createdBy | noRestrictions |
| $adminAuthToken | metadataRecordLink | dataDividerLink | 1 | 1 | dataDivider | noRestrictions |
| $adminAuthToken | metadataRecordLink | permissionUnitLink | 0 | X | permissionUnit | noRestrictions |
| $adminAuthToken | metadataTextVariable | tsCreatedTextVar | 1 | 1 | tsCreated | noRestrictions |
| $adminAuthToken | metadataGroup | updatedGroup | 1 | X | updated | noRestrictions |


!***> Check updatedGroup

Read and store updatedGroup for later use

!| RecordEndpointFixture |
| type | id | testReadRecordAndStoreJson? |
| metadataGroup | updatedGroup | |

Check the children

!| ChildComparerFixture |
| expectedNumberOfChildren | testCheckNumberOfChildren? |
| 2 | OK |

!| MetadataLinkFixture |
| authToken | linkedRecordType | linkedRecordId | getRepeatMin? | getRepeatMax? | getNameInData? | getRecordPartConstraint? |
| $adminAuthToken | metadataRecordLink | updatedByLink | 1 | 1 | updatedBy | noRestrictions |
| $adminAuthToken | metadataTextVariable | tsUpdatedTextVar | 1 | 1 | tsUpdated | noRestrictions |

*!

*!