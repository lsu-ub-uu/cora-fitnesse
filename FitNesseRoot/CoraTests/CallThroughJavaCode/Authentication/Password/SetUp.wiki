---
Static
---
!2 Setup for passwrod tests
!include -seamless .HelperPages.defineAdminAuthToken 

!define systemSecretMinimalGroup {!-{"name":"systemsecret","attributes":{"type":"group"},"children":[]}-!}
!define workOrderValidateSystemSecretMinimalGroup {!-{"order":{"name":"validationOrder","children":[{"name":"recordInfo","children":[{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}]},{"name":"validationType","children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"validationOrder"}]}]},{"name":"recordType","children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"systemSecret"}]},{"name":"validateLinks","value":"true"},{"name":"metadataToValidate","value":"new"}]},"record":{"name":"systemsecret","attributes":{"type":"group"},"children":[]}}-!}

!4 SystemSecret search: A systemSearch is created using fitnesseSearchGroup created in the suite.
!define systemSecretSearch {!-{"name":"search","children":[{"name":"metadataId","children":[{"name":"linkedRecordType","value":"metadata"},{"name":"linkedRecordId","value":"fitnesseSearchGroup"}]},{"name":"recordInfo","children":[{"name":"id","value":"systemSecretSearch"},{"name":"validationType","children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"search"}]},{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}]}]},{"name":"presentationId","children":[{"name":"linkedRecordType","value":"presentation"},{"name":"linkedRecordId","value":"fitnesseSearchPGroup"}]},{"name":"recordTypeToSearchIn","repeatId":"1","children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"systemSecret"}]},{"name":"searchGroup","value":"autocomplete"},{"name":"textId","children":[{"name":"linkedRecordType","value":"text"},{"name":"linkedRecordId","value":"fitnesseText"}]},{"name":"defTextId","children":[{"name":"linkedRecordType","value":"text"},{"name":"linkedRecordId","value":"fitnesseText"}]}]}-!}

!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? | getCreatedId? |
| $adminAuthToken | search | ${systemSecretSearch} | | CREATED | |

!4 PasswordUser: A user is created for password tests in the suite.
!define passwordUserCreateJson {!-{"name":"user","children":[{"name":"recordInfo","children":[{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}]},{"name":"validationType","children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"coraUser"}]}]},{"name":"userId","value":"password@login.fake"},{"name":"userFirstname","value":"Password"},{"name":"userLastname","value":"Login"},{"name":"userRole","repeatId":"0","children":[{"name":"userRole","children":[{"name":"linkedRecordType","value":"permissionRole"},{"name":"linkedRecordId","value":"nothing"}]}]},{"name":"activeStatus","value":"active"},{"name":"usePassword","value":"false"}],"attributes":{"type":"coraUser"}}-!}

!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? | getCreatedId? |
| $adminAuthToken | user | ${passwordUserCreateJson} | | CREATED | $passwordUserId= |

!define passwordUserUpdateWithPasswordPasswordJson {!-{"children":[{"children":[{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"coraUser"}],"name":"validationType"},{"name":"id","value":"-!$passwordUserId!-"},{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"user"}],"name":"type"},{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"141414"}],"name":"createdBy"},{"name":"tsCreated","value":"2024-05-08T09:37:04.232294Z"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"141414"}],"name":"updatedBy"},{"name":"tsUpdated","value":"2024-05-08T09:37:04.232294Z"}],"name":"updated"},{"name":"ignoreOverwriteProtection","value":"true"}],"name":"recordInfo"},{"name":"userId","value":"password@login.fake"},{"name":"userFirstname","value":"Password"},{"name":"userLastname","value":"Login"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"permissionRole"},{"name":"linkedRecordId","value":"nothing"}],"name":"userRole"}],"name":"userRole"},{"name":"activeStatus","value":"active"},{"name":"usePassword","value":"true"},{"name":"plainTextPassword","value":"password"}],"name":"user","attributes":{"type":"coraUser"}}-!}

!define passwordUserUpdateWithOtherPasswordJson {!-{"children":[{"children":[{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"coraUser"}],"name":"validationType"},{"name":"id","value":"-!$passwordUserId!-"},{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"user"}],"name":"type"},{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"141414"}],"name":"createdBy"},{"name":"tsCreated","value":"2024-05-08T09:37:04.232294Z"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"141414"}],"name":"updatedBy"},{"name":"tsUpdated","value":"2024-05-08T09:37:04.232294Z"}],"name":"updated"},{"name":"ignoreOverwriteProtection","value":"true"}],"name":"recordInfo"},{"name":"userId","value":"password@login.fake"},{"name":"userFirstname","value":"Password"},{"name":"userLastname","value":"Login"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"permissionRole"},{"name":"linkedRecordId","value":"nothing"}],"name":"userRole"}],"name":"userRole"},{"name":"activeStatus","value":"active"},{"name":"usePassword","value":"true"},{"name":"plainTextPassword","value":"otherPassword"}],"name":"user","attributes":{"type":"coraUser"}}-!}

!define passwordUserUpdateInactiveJson {!-{"children":[{"children":[{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"coraUser"}],"name":"validationType"},{"name":"id","value":"-!$passwordUserId!-"},{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"user"}],"name":"type"},{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"141414"}],"name":"createdBy"},{"name":"tsCreated","value":"2024-05-08T09:37:04.232294Z"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"141414"}],"name":"updatedBy"},{"name":"tsUpdated","value":"2024-05-08T09:37:04.232294Z"}],"name":"updated"},{"name":"ignoreOverwriteProtection","value":"true"}],"name":"recordInfo"},{"name":"userId","value":"password@login.fake"},{"name":"userFirstname","value":"Password"},{"name":"userLastname","value":"Login"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"permissionRole"},{"name":"linkedRecordId","value":"nothing"}],"name":"userRole"}],"name":"userRole"},{"name":"activeStatus","value":"inactive"},{"name":"usePassword","value":"true"},{"name":"plainTextPassword","value":"otherPassword"}],"name":"user","attributes":{"type":"coraUser"}}-!}

!define passwordUserUpdateActiveJson {!-{"children":[{"children":[{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"coraUser"}],"name":"validationType"},{"name":"id","value":"-!$passwordUserId!-"},{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"user"}],"name":"type"},{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"141414"}],"name":"createdBy"},{"name":"tsCreated","value":"2024-05-08T09:37:04.232294Z"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"141414"}],"name":"updatedBy"},{"name":"tsUpdated","value":"2024-05-08T09:37:04.232294Z"}],"name":"updated"},{"name":"ignoreOverwriteProtection","value":"true"}],"name":"recordInfo"},{"name":"userId","value":"password@login.fake"},{"name":"userFirstname","value":"Password"},{"name":"userLastname","value":"Login"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"permissionRole"},{"name":"linkedRecordId","value":"nothing"}],"name":"userRole"}],"name":"userRole"},{"name":"activeStatus","value":"active"},{"name":"usePassword","value":"true"},{"name":"plainTextPassword","value":"otherPassword"}],"name":"user","attributes":{"type":"coraUser"}}-!}

!define passwordUserUpdateActiveWithUsePasswordFalseAndNoPasswordJson {!-{"children":[{"children":[{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"coraUser"}],"name":"validationType"},{"name":"id","value":"-!$passwordUserId!-"},{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"user"}],"name":"type"},{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"141414"}],"name":"createdBy"},{"name":"tsCreated","value":"2024-05-08T09:37:04.232294Z"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"141414"}],"name":"updatedBy"},{"name":"tsUpdated","value":"2024-05-08T09:37:04.232294Z"}],"name":"updated"},{"name":"ignoreOverwriteProtection","value":"true"}],"name":"recordInfo"},{"name":"userId","value":"password@login.fake"},{"name":"userFirstname","value":"Password"},{"name":"userLastname","value":"Login"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"permissionRole"},{"name":"linkedRecordId","value":"nothing"}],"name":"userRole"}],"name":"userRole"},{"name":"activeStatus","value":"active"},{"name":"usePassword","value":"false"}],"name":"user","attributes":{"type":"coraUser"}}-!}

!define passwordUserUpdateActiveWithUsePasswordFalseAndHasPasswordJson {!-{"children":[{"children":[{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"coraUser"}],"name":"validationType"},{"name":"id","value":"-!$passwordUserId!-"},{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"user"}],"name":"type"},{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"141414"}],"name":"createdBy"},{"name":"tsCreated","value":"2024-05-08T09:37:04.232294Z"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"141414"}],"name":"updatedBy"},{"name":"tsUpdated","value":"2024-05-08T09:37:04.232294Z"}],"name":"updated"},{"name":"ignoreOverwriteProtection","value":"true"}],"name":"recordInfo"},{"name":"userId","value":"password@login.fake"},{"name":"userFirstname","value":"Password"},{"name":"userLastname","value":"Login"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"permissionRole"},{"name":"linkedRecordId","value":"nothing"}],"name":"userRole"}],"name":"userRole"},{"name":"activeStatus","value":"active"},{"name":"usePassword","value":"false"},{"name":"plainTextPassword","value":"otherPassword"}],"name":"user","attributes":{"type":"coraUser"}}-!}

!define passwordUserUpdateActiveWithUsePasswordTrueAndNoPasswordJson {!-{"children":[{"children":[{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"coraUser"}],"name":"validationType"},{"name":"id","value":"-!$passwordUserId!-"},{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"user"}],"name":"type"},{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"141414"}],"name":"createdBy"},{"name":"tsCreated","value":"2024-05-08T09:37:04.232294Z"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"141414"}],"name":"updatedBy"},{"name":"tsUpdated","value":"2024-05-08T09:37:04.232294Z"}],"name":"updated"},{"name":"ignoreOverwriteProtection","value":"true"}],"name":"recordInfo"},{"name":"userId","value":"password@login.fake"},{"name":"userFirstname","value":"Password"},{"name":"userLastname","value":"Login"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"permissionRole"},{"name":"linkedRecordId","value":"nothing"}],"name":"userRole"}],"name":"userRole"},{"name":"activeStatus","value":"active"},{"name":"usePassword","value":"true"}],"name":"user","attributes":{"type":"coraUser"}}-!}