---
Static
---
!***> '''Case 1''': Create
!***> '''1a''': A user must not be able to '''create''' records with permission units not matching the user itself (fitnesseUserPermissionUnit2)
!define currentAuthToken {$userAuthToken}
!define recordType {fitnesseRecordTypeWithPermissionUnit}
!define createData {!-{"name":"fitnesseWithRecordInfoPermissionUnit","children":[{"name":"recordInfo","children":[{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}]},{"name":"validationType","children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"fitnesseValidationTypeForRecordTypeWithPermissionUnit"}]},{"name":"permissionUnit","children":[{"name":"linkedRecordType","value":"permissionUnit"},{"name":"linkedRecordId","value":"fitnesseUserPermissionUnit2"}]}]},{"name":"fitnesseTextVar","value":"someTextVar"}]}-!}
!define expectedCreateResult {FORBIDDEN}

!| ChildComparerFixture |
| authToken | type | json | testCreateAndStoreRecord? | getStatusType? | getCreatedId? |
| ${currentAuthToken} | ${recordType} | ${createData} | ${expectedAnswer} | ${expectedCreateResult} | $CREATErecordWithPermissionUnit1= |

*!
!***> '''1b''': A user must be able to '''create''' records with permission units matching the user itself (fitnesseUserPermissionUnit)
!define recordType {fitnesseRecordTypeWithPermissionUnit}
!define createData {!-{"name":"fitnesseWithRecordInfoPermissionUnit","children":[{"name":"recordInfo","children":[{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}]},{"name":"validationType","children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"fitnesseValidationTypeForRecordTypeWithPermissionUnit"}]},{"name":"permissionUnit","children":[{"name":"linkedRecordType","value":"permissionUnit"},{"name":"linkedRecordId","value":"fitnesseUserPermissionUnit"}]}]},{"name":"fitnesseTextVar","value":"someTextVar"}]}-!}
!define expectedCreateResult {CREATED}

!style_code(''Create a record'')
!| ChildComparerFixture |
| authToken | type | json | testCreateAndStoreRecord? | getStatusType? | getCreatedId? |
| ${currentAuthToken} | ${recordType} | ${createData} | ${expectedAnswer} | ${expectedCreateResult} | $CREATErecordWithPermissionUnit2= |

!style_code(''Assert expected actionLinks'')
!| ActionComparerFixture |
| authToken | type | id | actions | testReadAndStoreRecord? | testCheckActions? |
| ${currentAuthToken} | ${recordType} | $CREATErecordWithPermissionUnit2 | {"actions":["read","update", "delete", "index", "read_incoming_links", "create", "validate", "list", "search"]} | | |
*!
*!