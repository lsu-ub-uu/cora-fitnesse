---
Static
---
!***> '''Case 1''': Create
!***> '''1a''': A user must not be able to '''create''' records with permission units not matching the user itself (fitnesseUserPermissionUnit3)
!define currentAuthToken {$userAuthToken}
!define recordType {fitnesseRecordTypeWithPermissionUnit}
!define createData {!-{"name":"fitnesseWithRecordInfoPermissionUnit","children":[{"name":"recordInfo","children":[{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}]},{"name":"validationType","children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"fitnesseValidationTypeForRecordTypeWithPermissionUnit"}]},{"name":"permissionUnit","children":[{"name":"linkedRecordType","value":"permissionUnit"},{"name":"linkedRecordId","value":"fitnesseUserPermissionUnit3"}]}]},{"name":"fitnesseTextVar","value":"someTextVar"}]}-!}
!define expectedCreateResult {FORBIDDEN}

!| ChildComparerFixture |
| authToken | type | json | testCreateAndStoreRecord? | getStatusType? | getCreatedId? |
| ${currentAuthToken} | ${recordType} | ${createData} | ${expectedAnswer} | ${expectedCreateResult} | $recordShouldNotHaveBeenCreated= |

*!
!***> '''1b''': A user must be able to '''create''' records with permission units matching the user itself (fitnesseUserPermissionUnit1)
!define recordType {fitnesseRecordTypeWithPermissionUnit}
!define createData {!-{"name":"fitnesseWithRecordInfoPermissionUnit","children":[{"name":"recordInfo","children":[{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}]},{"name":"validationType","children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"fitnesseValidationTypeForRecordTypeWithPermissionUnit"}]},{"name":"permissionUnit","children":[{"name":"linkedRecordType","value":"permissionUnit"},{"name":"linkedRecordId","value":"fitnesseUserPermissionUnit1"}]}]},{"name":"fitnesseTextVar","value":"someTextVar"}]}-!}
!define expectedCreateResult {CREATED}
!define allActionLinks {!-{"actions":["read","update", "delete", "index", "read_incoming_links", "create", "validate", "list", "search"]}-!}
!define expectedActionLinksResponse {!-Action read_incoming_links is missing. Action create is missing. Action validate is missing. Action list is missing. Action search is missing.-!}

!| ActionComparerFixture |
| authToken | type | json | testCreateAndStoreRecord? | getStatusType? | getCreatedId? | actions | testCheckActions? |
| ${currentAuthToken} | ${recordType} | ${createData} | ${expectedAnswer} | ${expectedCreateResult} | $CREATErecordWithPermissionUnit= | ${allActionLinks} | ${expectedActionLinksResponse} |

*!
*!