---
Static
---
!4 List
 * '''Case 1''': An admin should be able to list records with any visibility
 * '''Case 2''': A user should only be able to list records it is allowed by visibility permission term (published, unpublished)
 * '''Case 3''': A guest should only be able to list published records
 
!***> '''Case 1''' An admin should be able to list records with any visibility
!define currentAuthToken {$adminAuthToken}
!define recordType {fitnesseRecordTypeWithVisibility}
!define expectedResponseRegex {$commonUnpublishedRecordId AND $commonPublishedRecordId AND $commonHiddenRecordId}

!include -seamless .CoraTests.CallThroughJavaCode.BuiltInMetadata.BuiltInMetadataFunctionality.Visibility.User.Actions.ListRecordsAndEnsureResponse

*!
!***> '''Case 2''' A user should only be able to list records it is allowed by visibility permission term (published, unpublished)
!define currentAuthToken {$userAuthToken}
!define expectedResponseRegex {$commonUnpublishedRecordId AND $commonPublishedRecordId AND NOT $commonHiddenRecordId AND "name":"visibility","value":"unpublished" AND NOT "name":"visibility","value":"hidden"}

!include -seamless .CoraTests.CallThroughJavaCode.BuiltInMetadata.BuiltInMetadataFunctionality.Visibility.User.Actions.ListRecordsAndEnsureResponse

*!
!***> '''Case 3''' A guest should only be able to list published records
!define currentAuthToken {$guestAuthToken}
!define expectedResponseRegex {$commonPublishedRecordId AND NOT $commonUnpublishedRecordId AND NOT $commonHiddenRecordId AND NOT "name":"visibility","value":"unpublished" AND NOT "name":"visibility","value":"hidden"}

!include -seamless .CoraTests.CallThroughJavaCode.BuiltInMetadata.BuiltInMetadataFunctionality.Visibility.User.Actions.ListRecordsAndEnsureResponse
*!