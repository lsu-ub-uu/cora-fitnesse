---
Test
---
!2 Image
Binary images will be analyzed and then converted to different formats.The information from extracted from analyze step is:
 * Height in pixels
 * Width in pixels
 * Resolution in Dpi
 
The formats that images are converted to are:
 * '''thumbnail''': small image in jpg format. Fixed width 100px, height relative to the original.
 * '''record''': large thumbnail (displayed on the post card) jpg format. Fixed width 300px, height relative to the original.
 * '''preview''': medium-sized image in jpg format. Fixed width 600px, height relative to the original.
 * '''jp2''': JP2 corresponding to the original file. Note that even uploaded images in low-resolution original formats other than tiff are converted to JP2.

 * '''Case 1:''' It must be possible to upload a TIFF image. The image must be analyzed and converted to all described formats.
 * '''Case 2:''' It must be possible to upload a JPEG image. The image must be analyzed and converted to all described formats.

!***> '''Case 1''' Tiff

!define originalFileName {aTiff.tiff}
!define expectedChecksumSha512 {18e566f03b75c25ae68f7a543c1e31d4afd7d8934912a80b96005e4cbd664e268fd12d23e5687a1f62c93119c254ea52e56d398d17b5fea8987d8d96cc25115d}
!define expectedMimeType {image/tiff}
!define expectedFileSize {54452040}
!define expectedHeight {3419}
!define expectedWidth {2653}
!define expectedResolution {1200x1200}
!define thumbnailFileSize {33099}
!define thumbnailMimeType {image/jpeg}
!define thumbnailHeight {129}
!define thumbnailWidth {100}
!define mediumFileSize {68145}
!define mediumMimeType {image/jpeg}
!define mediumHeight {387}
!define mediumWidth {300}
!define largeFileSize {170904}
!define largeMimeType {image/jpeg}
!define largeHeight {773}
!define largeWidth {600}
!define jp2FileSize {565635}
!define jp2MimeType {image/jp2}
!define jp2Height {3419}
!define jp2Width {2653}
!define binaryType {image}

!include -seamless .CoraTests.CallThroughJavaCode.Data.Binary.UploadImageValidateAnalysisAndConvertion

!define httpCode {200}
!define representation {master}
!include -seamless .HelperPages.downloadResource

!define representation {thumbnail}
!include -seamless .HelperPages.downloadResource

!define representation {medium}
!include -seamless .HelperPages.downloadResource

!define representation {large}
!include -seamless .HelperPages.downloadResource

!define representation {jp2}
!include -seamless .HelperPages.downloadResource

!define archiveFileSystemPath {/tmp/sharedArchiveReadable/systemOne}
Show files in archive
!include -seamless .HelperPages.archiveFile
!define archiveFileSystemPath {/tmp/sharedFileStorage/systemOne/streams}
Show files in file storage
!include -seamless .HelperPages.archiveFile

*!
!***> '''Case 2''' Jpeg

!define originalFileName {aJpg.jpg}
!define expectedChecksumSha512 {8121447df8b82183f181611f23234247a026d0d66fda7bc421686b96c0cd66c11415f396cf7574dccd86815c26979234f74e64d3a82c6696f1dcfcc6b6bf070e}
!define expectedMimeType {image/jpeg}
!define expectedFileSize {347554}
!define expectedHeight {1690}
!define expectedWidth {1795}
!define expectedResolution {300x300}
!define recordType {binary}
!define thumbnailFileSize {38944}
!define thumbnailMimeType {image/jpeg}
!define thumbnailHeight {94}
!define thumbnailWidth {100}
!define mediumFileSize {64902}
!define mediumMimeType {image/jpeg}
!define mediumHeight {283}
!define mediumWidth {300}
!define largeFileSize {148597}
!define largeMimeType {image/jpeg}
!define largeHeight {565}
!define largeWidth {600}
!define jp2FileSize {368036}
!define jp2MimeType {image/jp2}
!define jp2Height {1690}
!define jp2Width {1795}
!define binaryType {image}

!include -seamless .CoraTests.CallThroughJavaCode.Data.Binary.UploadImageValidateAnalysisAndConvertion

!define representation {master}
!include -seamless .HelperPages.downloadResource

!define representation {thumbnail}
!include -seamless .HelperPages.downloadResource

!define representation {medium}
!include -seamless .HelperPages.downloadResource

!define representation {large}
!include -seamless .HelperPages.downloadResource

!define representation {jp2}
!include -seamless .HelperPages.downloadResource

!define archiveFileSystemPath {/tmp/sharedArchiveReadable/systemOne}
Show files in archive
!include -seamless .HelperPages.archiveFile
!define archiveFileSystemPath {/tmp/sharedFileStorage/systemOne/streams}
Show files in file storage
!include -seamless .HelperPages.archiveFile

*!
