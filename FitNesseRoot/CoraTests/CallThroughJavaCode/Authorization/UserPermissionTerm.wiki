---
Test
---
!contents -R2 -g -p -f -h
| import |
| se.uu.ub.cora.fitnesseintegration |

!1 Testing permission terms in user
If persmission terms are used in metadata for a record type, the user must have access to a key that matches the data value to have access to the record. !-
-!Example: A recordType studentThesis has the data field belongsTo, which is a link to a permissionUnit (an organisation). If the user tries to read a record which belongs to a permissionUnit that the user has no access to, it will not be allowed.

!***> Read User, fitnesseUser (121212)

!| RecordEndpointFixture |
| authToken | type | id | testReadRecord? | getStatusType? |
| $adminAuthToken | systemOneUser | 121212 | | OK |

*!
!2 Creating recordType testStudentThesis and metadata that is needed
!***> Create metadataTextVariable testTitleTextVar and metadataRecordLink testStudentThesisBelongsToLink

!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? |
| $adminAuthToken | coraText | {"children":[{"children":[{"name":"id","value":"someFitnesseText"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"coraText"}],"name":"validationType"}],"name":"recordInfo"},{"children":[{"name":"text","value":"Some  fitnesse text"}],"name":"textPart","attributes":{"type":"default","lang":"sv"}}],"name":"text"} | | CREATED |
| $adminAuthToken | coraText | {"children":[{"children":[{"name":"id","value":"someFitnesseDefText"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"coraText"}],"name":"validationType"}],"name":"recordInfo"},{"children":[{"name":"text","value":"Some  fitnesse text"}],"name":"textPart","attributes":{"type":"default","lang":"sv"}}],"name":"text"} | | CREATED |
| $adminAuthToken | metadataTextVariable | {"children":[{"children":[{"name":"id","value":"testTitleTextVar"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"metadataTextVariable"}],"name":"validationType"}],"name":"recordInfo"},{"name":"nameInData","value":"testTitle"},{"name":"regEx","value":"(^[0-9A-Za-z:-_\\s]{2,50}$)"},{"children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someFitnesseText"}],"name":"textId"},{"children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someFitnesseDefText"}],"name":"defTextId"}],"name":"metadata","attributes":{"type":"textVariable"}} | | CREATED |
| $adminAuthToken | metadataRecordLink | {"children":[{"children":[{"name":"id","value":"testStudentThesisBelongsToLink"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"metadataRecordLink"}],"name":"validationType"}],"name":"recordInfo"},{"name":"nameInData","value":"belongsTo"},{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"permissionUnit"}],"name":"linkedRecordType"},{"children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someFitnesseText"}],"name":"textId"},{"children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someFitnesseDefText"}],"name":"defTextId"}],"name":"metadata","attributes":{"type":"recordLink"}} | | CREATED |

*!
!***> Create permissionTerm testPermissionUnitPermissionTerm

!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? |
| $adminAuthToken | collectPermissionTerm | {"children":[{"children":[{"name":"id","value":"testPermissionUnitPermissionTerm"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"collectPermissionTerm"}],"name":"validationType"}],"name":"recordInfo"},{"name":"nameInData","value":"permissionUnitPermission"},{"children":[{"name":"permissionKey","value":"PERMISSION_UNIT"}],"name":"extraData"}],"name":"collectPermissionTerm","attributes":{"type":"permission"}} | | CREATED |
| $adminAuthToken | collectPermissionTerm | {"children":[{"children":[{"name":"id","value":"testSomeOtherPermissionTerm"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"collectPermissionTerm"}],"name":"validationType"}],"name":"recordInfo"},{"name":"nameInData","value":"someOtherPermission"},{"children":[{"name":"permissionKey","value":"SOME_OTHER_PERMISSION"}],"name":"extraData"}],"name":"collectPermissionTerm","attributes":{"type":"permission"}} | | CREATED |

*!
!***> Create metadataGroups to use in recordType

!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? |
| $adminAuthToken | metadataGroup | {"children":[{"children":[{"name":"id","value":"testStudentThesisRecordInfoNewGroup"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"metadataGroup"}],"name":"validationType"}],"name":"recordInfo"},{"name":"nameInData","value":"recordInfo"},{"children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someFitnesseText"}],"name":"textId"},{"children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someFitnesseDefText"}],"name":"defTextId"},{"children":[{"repeatId":"1","children":[{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"1"},{"children":[{"name":"linkedRecordType","value":"metadataTextVariable"},{"name":"linkedRecordId","value":"idTextVar"}],"name":"ref"},{"repeatId":"0","children":[{"name":"linkedRecordType","value":"collectIndexTerm"},{"name":"linkedRecordId","value":"recordIdCollectIndexTerm"}],"name":"childRefCollectTerm","attributes":{"type":"index"}}],"name":"childReference"},{"repeatId":"2","children":[{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"1"},{"children":[{"name":"linkedRecordType","value":"metadataRecordLink"},{"name":"linkedRecordId","value":"dataDividerLink"}],"name":"ref"}],"name":"childReference"},{"repeatId":"3","children":[{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"X"},{"children":[{"name":"linkedRecordType","value":"metadataRecordLink"},{"name":"linkedRecordId","value":"testStudentThesisBelongsToLink"}],"name":"ref"},{"children":[{"name":"linkedRecordType","value":"collectPermissionTerm"},{"name":"linkedRecordId","value":"testPermissionUnitPermissionTerm"}],"name":"childRefCollectTerm","attributes":{"type":"permission"}}],"name":"childReference"},{"repeatId":"4","children":[{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"1"},{"children":[{"name":"linkedRecordType","value":"metadataRecordLink"},{"name":"linkedRecordId","value":"validationTypeLink"}],"name":"ref"}],"name":"childReference"}],"name":"childReferences"},{"name":"excludePGroupCreation","value":"true"}],"name":"metadata","attributes":{"type":"group"}} | | CREATED |
| $adminAuthToken | metadataGroup | {"children":[{"children":[{"name":"id","value":"testStudentThesisRecordInfoGroup"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"metadataGroup"}],"name":"validationType"}],"name":"recordInfo"},{"name":"nameInData","value":"recordInfo"},{"children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someFitnesseText"}],"name":"textId"},{"children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someFitnesseDefText"}],"name":"defTextId"},{"children":[{"repeatId":"1","children":[{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"1"},{"children":[{"name":"linkedRecordType","value":"metadataTextVariable"},{"name":"linkedRecordId","value":"idTextVar"}],"name":"ref"},{"repeatId":"0","children":[{"name":"linkedRecordType","value":"collectIndexTerm"},{"name":"linkedRecordId","value":"recordIdCollectIndexTerm"}],"name":"childRefCollectTerm","attributes":{"type":"index"}}],"name":"childReference"},{"repeatId":"5","children":[{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"1"},{"children":[{"name":"linkedRecordType","value":"metadataRecordLink"},{"name":"linkedRecordId","value":"recordTypeLink"}],"name":"ref"}],"name":"childReference"},{"repeatId":"3","children":[{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"1"},{"children":[{"name":"linkedRecordType","value":"metadataRecordLink"},{"name":"linkedRecordId","value":"createdByLink"}],"name":"ref"}],"name":"childReference"},{"repeatId":"4","children":[{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"1"},{"children":[{"name":"linkedRecordType","value":"metadataRecordLink"},{"name":"linkedRecordId","value":"dataDividerLink"}],"name":"ref"}],"name":"childReference"},{"repeatId":"6","children":[{"name":"repeatMin","value":"0"},{"name":"repeatMax","value":"X"},{"children":[{"name":"linkedRecordType","value":"metadataRecordLink"},{"name":"linkedRecordId","value":"permissionUnitLink"}],"name":"ref"}],"name":"childReference"},{"repeatId":"10","children":[{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"X"},{"children":[{"name":"linkedRecordType","value":"metadataGroup"},{"name":"linkedRecordId","value":"updatedGroup"}],"name":"ref"}],"name":"childReference"},{"repeatId":"8","children":[{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"1"},{"children":[{"name":"linkedRecordType","value":"metadataTextVariable"},{"name":"linkedRecordId","value":"tsCreatedTextVar"}],"name":"ref"}],"name":"childReference"},{"repeatId":"11","children":[{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"X"},{"children":[{"name":"linkedRecordType","value":"metadataRecordLink"},{"name":"linkedRecordId","value":"testStudentThesisBelongsToLink"}],"name":"ref"},{"children":[{"name":"linkedRecordType","value":"collectPermissionTerm"},{"name":"linkedRecordId","value":"testPermissionUnitPermissionTerm"}],"name":"childRefCollectTerm","attributes":{"type":"permission"}}],"name":"childReference"},{"repeatId":"12","children":[{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"1"},{"children":[{"name":"linkedRecordType","value":"metadataRecordLink"},{"name":"linkedRecordId","value":"validationTypeLink"}],"name":"ref"}],"name":"childReference"}],"name":"childReferences"},{"name":"excludePGroupCreation","value":"true"}],"name":"metadata","attributes":{"type":"group"}} | | CREATED |
| $adminAuthToken | metadataGroup | {"children":[{"children":[{"name":"id","value":"testStudentThesisNewGroup"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"metadataGroup"}],"name":"validationType"}],"name":"recordInfo"},{"name":"nameInData","value":"testStudentThesis"},{"children":[{"repeatId":"0","children":[{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"1"},{"children":[{"name":"linkedRecordType","value":"metadataTextVariable"},{"name":"linkedRecordId","value":"testTitleTextVar"}],"name":"ref"}],"name":"childReference"},{"repeatId":"2","children":[{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"1"},{"children":[{"name":"linkedRecordType","value":"metadataGroup"},{"name":"linkedRecordId","value":"testStudentThesisRecordInfoNewGroup"}],"name":"ref"}],"name":"childReference"}],"name":"childReferences"},{"name":"excludePGroupCreation","value":"true"}],"name":"metadata","attributes":{"type":"group"}} | | CREATED |
| $adminAuthToken | metadataGroup | {"children":[{"children":[{"name":"id","value":"testStudentThesisGroup"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"metadataGroup"}],"name":"validationType"}],"name":"recordInfo"},{"name":"nameInData","value":"testStudentThesis"},{"children":[{"repeatId":"0","children":[{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"1"},{"children":[{"name":"linkedRecordType","value":"metadataTextVariable"},{"name":"linkedRecordId","value":"testTitleTextVar"}],"name":"ref"}],"name":"childReference"},{"repeatId":"2","children":[{"name":"repeatMin","value":"1"},{"name":"repeatMax","value":"1"},{"children":[{"name":"linkedRecordType","value":"metadataGroup"},{"name":"linkedRecordId","value":"testStudentThesisRecordInfoGroup"}],"name":"ref"}],"name":"childReference"}],"name":"childReferences"}],"name":"metadata","attributes":{"type":"group"}} | | CREATED |

*!


!***> Create recordType and validationType for testStudentThesis

!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? |
| $adminAuthToken | recordType | {"children":[{"name":"abstract","value":"false"},{"children":[{"name":"id","value":"testStudentThesis"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"recordType"}],"name":"validationType"}],"name":"recordInfo"},{"name":"userSuppliedId","value":"true"},{"repeatId":"0","name":"groupOfRecordType","value":"typeOfResource"},{"children":[{"name":"linkedRecordType","value":"metadataGroup"},{"name":"linkedRecordId","value":"testStudentThesisGroup"}],"name":"metadataId"},{"children":[{"name":"linkedRecordType","value":"metadataGroup"},{"name":"linkedRecordId","value":"testStudentThesisNewGroup"}],"name":"newMetadataId"},{"children":[{"name":"linkedRecordType","value":"presentationGroup"},{"name":"linkedRecordId","value":"testStudentThesisOutputPGroup"}],"name":"presentationViewId"},{"children":[{"name":"linkedRecordType","value":"presentationGroup"},{"name":"linkedRecordId","value":"testStudentThesisPGroup"}],"name":"presentationFormId"},{"children":[{"name":"linkedRecordType","value":"presentationGroup"},{"name":"linkedRecordId","value":"testStudentThesisOutputPGroup"}],"name":"menuPresentationViewId"},{"children":[{"name":"linkedRecordType","value":"presentationGroup"},{"name":"linkedRecordId","value":"testStudentThesisOutputPGroup"}],"name":"listPresentationViewId"},{"children":[{"name":"linkedRecordType","value":"presentationGroup"},{"name":"linkedRecordId","value":"testStudentThesisPGroup"}],"name":"autocompletePresentationView"},{"children":[{"name":"linkedRecordType","value":"presentationGroup"},{"name":"linkedRecordId","value":"testStudentThesisPGroup"}],"name":"newPresentationFormId"},{"children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someFitnesseText"}],"name":"textId"},{"children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"someFitnesseDefText"}],"name":"defTextId"},{"name":"public","value":"false"},{"name":"storeInArchive","value":"false"}],"name":"recordType"} | | CREATED |
| $adminAuthToken | validationType | {"name":"validationType","children":[{"name":"recordInfo","children":[{"name":"id","value":"testStudentThesis"},{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}]},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"recordType"}],"name":"validationType"}]},{"name":"textId","children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"fitnesseText"}]},{"name":"defTextId","children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"fitnesseText"}]},{"name":"newMetadataId","children":[{"name":"linkedRecordType","value":"metadataGroup"},{"name":"linkedRecordId","value":"testStudentThesisNewGroup"}]},{"name":"metadataId","children":[{"name":"linkedRecordType","value":"metadataGroup"},{"name":"linkedRecordId","value":"testStudentThesisGroup"}]},{"name":"newPresentationFormId","children":[{"name":"linkedRecordType","value":"presentationGroup"},{"name":"linkedRecordId","value":"recordTypePGroup"}]},{"name":"presentationFormId","children":[{"name":"linkedRecordType","value":"presentationGroup"},{"name":"linkedRecordId","value":"recordTypePGroup"}]},{"name":"validatesRecordType","children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"testStudentThesis"}]}]} | | CREATED |

*!
!***> Update rule everything for fitnesseAdmin for access to all permission units

!| RecordEndpointFixture |
| authToken | type | id | json | testUpdateRecord? | getStatusType? |
| $adminAuthToken | systemOneUser | 131313 | {"children":[{"children":[{"name":"id","value":"131313"},{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"systemOneUser"}],"name":"type"},{"children":[{"name":"linkedRecordType","value":"systemOneUser"},{"name":"linkedRecordId","value":"12345"}],"name":"createdBy"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"systemOne"}],"name":"dataDivider"},{"name":"tsCreated","value":"2017-10-01T00:00:00.000000Z"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"141414"}],"name":"updatedBy"},{"name":"tsUpdated","value":"2018-04-11T08:56:43.010000Z"}],"name":"updated"},{"repeatId":"1","children":[{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"141414"}],"name":"updatedBy"},{"name":"tsUpdated","value":"2018-09-27T09:46:09.781000Z"}],"name":"updated"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"systemOneUser"}],"name":"validationType"}],"name":"recordInfo"},{"name":"userId","value":"fitnesseAdmin@system.cora.uu.se"},{"name":"userFirstname","value":"Fitnesse"},{"name":"userLastname","value":"Admin"},{"repeatId":"1","children":[{"children":[{"name":"linkedRecordType","value":"permissionRole"},{"name":"linkedRecordId","value":"everything"}],"name":"userRole"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"collectPermissionTerm"},{"name":"linkedRecordId","value":"systemPermissionTerm"}],"name":"rule"},{"repeatId":"0","name":"value","value":"system.*"}],"name":"permissionTermRulePart"},{"repeatId":"1","children":[{"children":[{"name":"linkedRecordType","value":"collectPermissionTerm"},{"name":"linkedRecordId","value":"testPermissionUnitPermissionTerm"}],"name":"rule"},{"repeatId":"0","name":"value","value":"system.*"}],"name":"permissionTermRulePart"}],"name":"userRole"},{"name":"activeStatus","value":"active"},{"repeatId":"3603423986672","children":[{"children":[{"name":"linkedRecordType","value":"appToken"},{"name":"linkedRecordId","value":"appToken:3603190243788"}],"name":"appTokenLink"},{"name":"note","value":"JsClient"}],"name":"userAppTokenGroup"}],"name":"user"} | | OK |

*!
!3 Create testStudentThesis
!***> Create two permissionUnits to link to from a testStudentThesis

!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? |
| $adminAuthToken | permissionUnit | {"children":[{"children":[{"name":"id","value":"my.test.unit"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"permissionUnit"}],"name":"validationType"}],"name":"recordInfo"},{"name":"name","value":"myTestPermissionUnit"}],"name":"permissionUnit"} | | CREATED |
| $adminAuthToken | permissionUnit | {"children":[{"children":[{"name":"id","value":"my.other.test.unit"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"permissionUnit"}],"name":"validationType"}],"name":"recordInfo"},{"name":"name","value":"myTestPermissionUnit"}],"name":"permissionUnit"} | | CREATED |
| $adminAuthToken | permissionUnit | {"children":[{"children":[{"name":"id","value":"some.other.test.unit"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"permissionUnit"}],"name":"validationType"}],"name":"recordInfo"},{"name":"name","value":"myTestPermissionUnit"}],"name":"permissionUnit"} | | CREATED |

*!
!***> Create data for a testStudentThesis

!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? |
| $adminAuthToken | testStudentThesis | {"children":[{"children":[{"name":"id","value":"studentThesis1"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"repeatId":"3","children":[{"name":"linkedRecordType","value":"permissionUnit"},{"name":"linkedRecordId","value":"my.test.unit"}],"name":"belongsTo"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"testStudentThesis"}],"name":"validationType"}],"name":"recordInfo"},{"name":"testTitle","value":"En titel"}],"name":"testStudentThesis"} | | CREATED |

*!
!***> Update rule nothing for fitnesseUser for access to recordType testStudentThesis

!| RecordEndpointFixture |
| authToken | type | id | json | testUpdateRecord? | getStatusType? |
| $adminAuthToken | permissionRule | nothing | {"children":[{"children":[{"name":"id","value":"nothing"},{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"permissionRule"}],"name":"type"},{"children":[{"name":"linkedRecordType","value":"systemOneUser"},{"name":"linkedRecordId","value":"12345"}],"name":"createdBy"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"name":"dataDivider"},{"name":"tsCreated","value":"2017-10-01T00:00:00.000000Z"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"permissionRule"}],"name":"validationType"}],"name":"recordInfo"},{"children":[{"repeatId":"0","name":"permissionRulePartValue","value":"system.*"}],"name":"permissionRulePart","attributes":{"type":"action"}},{"children":[{"repeatId":"0","name":"permissionRulePartValue","value":"system.testStudentThesis"}],"name":"permissionRulePart","attributes":{"type":"recordType"}},{"name":"activeStatus","value":"active"},{"children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"nothingRuleText"}],"name":"textId"},{"children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"nothingRuleDefText"}],"name":"defTextId"}],"name":"permissionRule"} | | OK |

*!
!***> Update fitnesse user giving permission to a permissionUnit

!| RecordEndpointFixture |
| authToken | type | id | json | testUpdateRecord? | getStatusType? |
| $adminAuthToken | systemOneUser | 121212 | {"children":[{"children":[{"name":"id","value":"121212"},{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"systemOneUser"}],"name":"type"},{"children":[{"name":"linkedRecordType","value":"systemOneUser"},{"name":"linkedRecordId","value":"131313"}],"name":"createdBy"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"systemOne"}],"name":"dataDivider"},{"name":"tsCreated","value":"2017-10-01T00:00:00.000000Z"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"141414"}],"name":"updatedBy"},{"name":"tsUpdated","value":"2018-04-11T08:56:47.811000Z"}],"name":"updated"},{"repeatId":"1","children":[{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"141414"}],"name":"updatedBy"},{"name":"tsUpdated","value":"2018-09-27 09:46:35.579"}],"name":"updated"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"systemOneUser"}],"name":"validationType"}],"name":"recordInfo"},{"name":"userId","value":"fitnesseUser@system.cora.uu.se"},{"name":"userFirstname","value":"Fitnesse"},{"name":"userLastname","value":"User"},{"repeatId":"7175775086411621","children":[{"children":[{"name":"linkedRecordType","value":"permissionRole"},{"name":"linkedRecordId","value":"fitnesseTextAdmin"}],"name":"userRole"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"collectPermissionTerm"},{"name":"linkedRecordId","value":"systemPermissionTerm"}],"name":"rule"},{"repeatId":"0","name":"value","value":"system.*"}],"name":"permissionTermRulePart"},{"repeatId":"1","children":[{"children":[{"name":"linkedRecordType","value":"collectPermissionTerm"},{"name":"linkedRecordId","value":"testPermissionUnitPermissionTerm"}],"name":"rule"},{"repeatId":"0","name":"value","value":"system.permissionUnit_my.other.test.unit"}],"name":"permissionTermRulePart"}],"name":"userRole"},{"name":"activeStatus","value":"active"},{"repeatId":"7175775086411619","children":[{"children":[{"name":"linkedRecordType","value":"appToken"},{"name":"linkedRecordId","value":"appToken:7175774276485719"}],"name":"appTokenLink"},{"name":"note","value":"For fitnesse"}],"name":"userAppTokenGroup"}],"name":"user"} | | OK |

*!
!3 Try to create, updated and delete a studentThesis when user has no access to data
!***> Try to create studentThesis2 as fitnesseUser. This should not be allowed since fitnesseUser has no access to the permission unit that the studentThesis belongs to.

!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? |
| $userAuthToken | testStudentThesis | {"children":[{"children":[{"name":"id","value":"studentThesis2"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"repeatId":"3","children":[{"name":"linkedRecordType","value":"permissionUnit"},{"name":"linkedRecordId","value":"my.test.unit"}],"name":"belongsTo"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"testStudentThesis"}],"name":"validationType"}],"name":"recordInfo"},{"name":"testTitle","value":"En titel"}],"name":"testStudentThesis"} | | FORBIDDEN |

*!
!***> Try to update studentThesis1 as fitnesseUser. This should NOT be allowed since fitnesseUser has no access to the permission unit that the studentThesis belongs to.

!| RecordEndpointFixture |
| authToken | type | id | json | testUpdateRecord? | getStatusType? |
| $userAuthToken | testStudentThesis | studentThesis1 | {"children":[{"children":[{"name":"id","value":"studentThesis1"},{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"testStudentThesis"}],"name":"type"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"children":[{"name":"linkedRecordType","value":"systemOneUser"},{"name":"linkedRecordId","value":"131313"}],"name":"createdBy"},{"name":"tsCreated","value":"2018-04-11T08:56:47.811000Z"},{"repeatId":"3","children":[{"name":"linkedRecordType","value":"permissionUnit"},{"name":"linkedRecordId","value":"my.test.unit"}],"name":"belongsTo"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"testStudentThesis"}],"name":"validationType"}],"name":"recordInfo"},{"name":"testTitle","value":"En titel"}],"name":"testStudentThesis"} | | FORBIDDEN |

*!
!***> Try to delete studentThesis1 as fitnesseUser, this should not be allowed

!| RecordEndpointFixture |
| authToken | type | id | testDeleteRecord? | getStatusType? |
| $userAuthToken | testStudentThesis | studentThesis1 | | FORBIDDEN |

*!
!3 Create, update and delete a studentThesis when user has access to data
!***> Try to create studentThesis2 as fitnesseUser. This should be allowed since fitnesseUser has access to the permission unit that the studentThesis belongs to.

!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? |
| $userAuthToken | testStudentThesis | {"children":[{"children":[{"name":"id","value":"studentThesis2"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"repeatId":"3","children":[{"name":"linkedRecordType","value":"permissionUnit"},{"name":"linkedRecordId","value":"my.other.test.unit"}],"name":"belongsTo"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"testStudentThesis"}],"name":"validationType"}],"name":"recordInfo"},{"name":"testTitle","value":"En titel"}],"name":"testStudentThesis"} | | CREATED |

*!
!***> Update studentThesis1 as fitnesseAdmin, setting permission unit to a unit the fitnesseUser has access to.

!| RecordEndpointFixture |
| authToken | type | id | json | testUpdateRecord? | getStatusType? |
| $adminAuthToken | testStudentThesis | studentThesis1 | {"children":[{"children":[{"name":"id","value":"studentThesis1"},{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"testStudentThesis"}],"name":"type"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"children":[{"name":"linkedRecordType","value":"systemOneUser"},{"name":"linkedRecordId","value":"131313"}],"name":"createdBy"},{"name":"tsCreated","value":"2018-04-11T08:56:47.811000Z"},{"repeatId":"3","children":[{"name":"linkedRecordType","value":"permissionUnit"},{"name":"linkedRecordId","value":"my.other.test.unit"}],"name":"belongsTo"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"testStudentThesis"}],"name":"validationType"}],"name":"recordInfo"},{"name":"testTitle","value":"En titel"}],"name":"testStudentThesis"} | | OK |

*!
!***> Try to update studentThesis1 as fitnesseUser agin, this should now be allowed.

!| RecordEndpointFixture |
| authToken | type | id | json | testUpdateRecord? | getStatusType? |
| $userAuthToken | testStudentThesis | studentThesis1 | {"children":[{"children":[{"name":"id","value":"studentThesis1"},{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"testStudentThesis"}],"name":"type"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"children":[{"name":"linkedRecordType","value":"systemOneUser"},{"name":"linkedRecordId","value":"131313"}],"name":"createdBy"},{"name":"tsCreated","value":"2018-04-11T08:56:47.811000Z"},{"repeatId":"3","children":[{"name":"linkedRecordType","value":"permissionUnit"},{"name":"linkedRecordId","value":"my.other.test.unit"}],"name":"belongsTo"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"testStudentThesis"}],"name":"validationType"}],"name":"recordInfo"},{"name":"testTitle","value":"En titel"}],"name":"testStudentThesis"} | | OK |

*!
!***> Try to delete studentThesis2 as fitnesseUser, this should be allowed

!| RecordEndpointFixture |
| authToken | type | id | testDeleteRecord? | getStatusType? |
| $userAuthToken | testStudentThesis | studentThesis2 | | OK |

*!
!3 All permissionTermRuleParts should be added to all the rules for the role that the permissionTermRulePart are combined with
!3 Create, update and delete a studentThesis when user has access to data through a second permissionTermRulePart
!***> Update fitnesse user giving permission to a permissionUnit through second permissionTermRulePart

!| RecordEndpointFixture |
| authToken | type | id | json | testUpdateRecord? | getStatusType? |
| $adminAuthToken | systemOneUser | 121212 | {"children":[{"children":[{"name":"id","value":"121212"},{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"systemOneUser"}],"name":"type"},{"children":[{"name":"linkedRecordType","value":"systemOneUser"},{"name":"linkedRecordId","value":"131313"}],"name":"createdBy"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"systemOne"}],"name":"dataDivider"},{"name":"tsCreated","value":"2017-10-01T00:00:00.000000Z"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"systemOneUser"}],"name":"validationType"}],"name":"recordInfo"},{"name":"userId","value":"fitnesseUser@system.cora.uu.se"},{"name":"userFirstname","value":"Fitnesse"},{"name":"userLastname","value":"User"},{"repeatId":"7175775086411621","children":[{"children":[{"name":"linkedRecordType","value":"permissionRole"},{"name":"linkedRecordId","value":"fitnesseTextAdmin"}],"name":"userRole"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"collectPermissionTerm"},{"name":"linkedRecordId","value":"testSomeOtherPermissionTerm"}],"name":"rule"},{"repeatId":"0","name":"value","value":"system.*"}],"name":"permissionTermRulePart"},{"repeatId":"1","children":[{"children":[{"name":"linkedRecordType","value":"collectPermissionTerm"},{"name":"linkedRecordId","value":"testPermissionUnitPermissionTerm"}],"name":"rule"},{"repeatId":"0","name":"value","value":"system.permissionUnit_my.other.test.unit"}],"name":"permissionTermRulePart"}],"name":"userRole"},{"name":"activeStatus","value":"active"},{"repeatId":"7175775086411619","children":[{"children":[{"name":"linkedRecordType","value":"appToken"},{"name":"linkedRecordId","value":"appToken:7175774276485719"}],"name":"appTokenLink"},{"name":"note","value":"For fitnesse"}],"name":"userAppTokenGroup"}],"name":"user"} | | OK |

*!
!***> Try to create studentThesis2 as fitnesseUser. This should be allowed since fitnesseUser has access to the permission unit that the studentThesis belongs to.

!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? |
| $userAuthToken | testStudentThesis | {"children":[{"children":[{"name":"id","value":"studentThesis2"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"repeatId":"3","children":[{"name":"linkedRecordType","value":"permissionUnit"},{"name":"linkedRecordId","value":"my.other.test.unit"}],"name":"belongsTo"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"testStudentThesis"}],"name":"validationType"}],"name":"recordInfo"},{"name":"testTitle","value":"En titel"}],"name":"testStudentThesis"} | | CREATED |

*!
!***> Try to update studentThesis2 as fitnesseUser, this should now be allowed.

!| RecordEndpointFixture |
| authToken | type | id | json | testUpdateRecord? | getStatusType? |
| $userAuthToken | testStudentThesis | studentThesis2 | {"children":[{"children":[{"name":"id","value":"studentThesis2"},{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"testStudentThesis"}],"name":"type"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"children":[{"name":"linkedRecordType","value":"systemOneUser"},{"name":"linkedRecordId","value":"131313"}],"name":"createdBy"},{"name":"tsCreated","value":"2018-04-11T08:56:47.811000Z"},{"repeatId":"3","children":[{"name":"linkedRecordType","value":"permissionUnit"},{"name":"linkedRecordId","value":"my.other.test.unit"}],"name":"belongsTo"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"testStudentThesis"}],"name":"validationType"}],"name":"recordInfo"},{"name":"testTitle","value":"En titel"}],"name":"testStudentThesis"} | | OK |

*!
!***> Try to delete studentThesis2 as fitnesseUser, this should be allowed

!| RecordEndpointFixture |
| authToken | type | id | testDeleteRecord? | getStatusType? |
| $userAuthToken | testStudentThesis | studentThesis2 | | OK |

*!
!3 Create a studentThesis with repeating values in data when user has access to one repeating data
!***> Try to create studentThesis3 as fitnesseUser. This should be allowed since fitnesseUser has access to one of the permission unit that the studentThesis belongs to.

!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? |
| $userAuthToken | testStudentThesis | {"children":[{"children":[{"name":"id","value":"studentThesis3"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"repeatId":"3","children":[{"name":"linkedRecordType","value":"permissionUnit"},{"name":"linkedRecordId","value":"my.test.unit"}],"name":"belongsTo"},{"repeatId":"4","children":[{"name":"linkedRecordType","value":"permissionUnit"},{"name":"linkedRecordId","value":"my.other.test.unit"}],"name":"belongsTo"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"testStudentThesis"}],"name":"validationType"}],"name":"recordInfo"},{"name":"testTitle","value":"En titel"}],"name":"testStudentThesis"} | | CREATED |

*!
!***> Try to update studentThesis3 as fitnesseUser, this should be allowed.

!| RecordEndpointFixture |
| authToken | type | id | json | testUpdateRecord? | getStatusType? |
| $userAuthToken | testStudentThesis | studentThesis3 | {"children":[{"children":[{"name":"id","value":"studentThesis3"},{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"testStudentThesis"}],"name":"type"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"children":[{"name":"linkedRecordType","value":"systemOneUser"},{"name":"linkedRecordId","value":"131313"}],"name":"createdBy"},{"name":"tsCreated","value":"2018-04-11T08:56:47.811000Z"},{"repeatId":"3","children":[{"name":"linkedRecordType","value":"permissionUnit"},{"name":"linkedRecordId","value":"my.test.unit"}],"name":"belongsTo"},{"repeatId":"4","children":[{"name":"linkedRecordType","value":"permissionUnit"},{"name":"linkedRecordId","value":"my.other.test.unit"}],"name":"belongsTo"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"testStudentThesis"}],"name":"validationType"}],"name":"recordInfo"},{"name":"testTitle","value":"En titel"}],"name":"testStudentThesis"} | | OK |

*!
!***> Try to delete studentThesis3 as fitnesseUser, this should be allowed

!| RecordEndpointFixture |
| authToken | type | id | testDeleteRecord? | getStatusType? |
| $userAuthToken | testStudentThesis | studentThesis3 | | OK |

*!
!3 Create a studentThesis with repeating values in data when user has NO access to repeating data
!***> Try to create studentThesis4 as fitnesseUser. This should NOT be allowed since fitnesseUser has NO access to any of the permission unit that the studentThesis belongs to.

!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? |
| $userAuthToken | testStudentThesis | {"children":[{"children":[{"name":"id","value":"studentThesis4"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"repeatId":"3","children":[{"name":"linkedRecordType","value":"permissionUnit"},{"name":"linkedRecordId","value":"my.test.unit"}],"name":"belongsTo"},{"repeatId":"4","children":[{"name":"linkedRecordType","value":"permissionUnit"},{"name":"linkedRecordId","value":"some.other.test.unit"}],"name":"belongsTo"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"testStudentThesis"}],"name":"validationType"}],"name":"recordInfo"},{"name":"testTitle","value":"En titel"}],"name":"testStudentThesis"} | | FORBIDDEN |

*!
!***> Create studentThesis4 as fitnesseAdmin.

!| RecordEndpointFixture |
| authToken | type | json | testCreateRecord? | getStatusType? |
| $adminAuthToken | testStudentThesis | {"children":[{"children":[{"name":"id","value":"studentThesis4"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"repeatId":"3","children":[{"name":"linkedRecordType","value":"permissionUnit"},{"name":"linkedRecordId","value":"my.test.unit"}],"name":"belongsTo"},{"repeatId":"4","children":[{"name":"linkedRecordType","value":"permissionUnit"},{"name":"linkedRecordId","value":"some.other.test.unit"}],"name":"belongsTo"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"testStudentThesis"}],"name":"validationType"}],"name":"recordInfo"},{"name":"testTitle","value":"En titel"}],"name":"testStudentThesis"} | | CREATED |

*!
!***> Try to update studentThesis4 as fitnesseUser, this should NOT be allowed.

!| RecordEndpointFixture |
| authToken | type | id | json | testUpdateRecord? | getStatusType? |
| $userAuthToken | testStudentThesis | studentThesis4 | {"children":[{"children":[{"name":"id","value":"studentThesis4"},{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"testStudentThesis"}],"name":"type"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"children":[{"name":"linkedRecordType","value":"systemOneUser"},{"name":"linkedRecordId","value":"131313"}],"name":"createdBy"},{"name":"tsCreated","value":"2018-04-11T08:56:47.811000Z"},{"repeatId":"3","children":[{"name":"linkedRecordType","value":"permissionUnit"},{"name":"linkedRecordId","value":"some.other.test.unit"}],"name":"belongsTo"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"testStudentThesis"}],"name":"validationType"}],"name":"recordInfo"},{"name":"testTitle","value":"En titel"}],"name":"testStudentThesis"} | | FORBIDDEN |

*!
!***> Try to delete studentThesis4 as fitnesseUser, this should NOT be allowed

!| RecordEndpointFixture |
| authToken | type | id | testDeleteRecord? | getStatusType? |
| $userAuthToken | testStudentThesis | studentThesis4 | | FORBIDDEN |

*!
!2 Clean up created data
!***> Update permissionRule nothing, restoring old state

!| RecordEndpointFixture |
| authToken | type | id | json | testUpdateRecord? | getStatusType? |
| $adminAuthToken | permissionRule | nothing | {"children":[{"children":[{"name":"id","value":"nothing"},{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"permissionRule"}],"name":"type"},{"children":[{"name":"linkedRecordType","value":"systemOneUser"},{"name":"linkedRecordId","value":"12345"}],"name":"createdBy"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"name":"dataDivider"},{"name":"tsCreated","value":"2017-10-01T00:00:00.000000Z"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"permissionRule"}],"name":"validationType"}],"name":"recordInfo"},{"children":[{"repeatId":"0","name":"permissionRulePartValue","value":"system.DISABLED"}],"name":"permissionRulePart","attributes":{"type":"action"}},{"children":[{"repeatId":"0","name":"permissionRulePartValue","value":"system.DISABLED"}],"name":"permissionRulePart","attributes":{"type":"recordType"}},{"name":"activeStatus","value":"inactive"},{"children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"nothingRuleText"}],"name":"textId"},{"children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"nothingRuleDefText"}],"name":"defTextId"}],"name":"permissionRule"} | | OK |

*!
!***> Clean up created data, metadata and texts

!| RecordEndpointFixture |
| authToken | type | id | testDeleteRecord? | getStatusType? |
| $adminAuthToken | testStudentThesis | studentThesis1 | | OK |
| $adminAuthToken | testStudentThesis | studentThesis4 | | OK |
| $adminAuthToken | search | testStudentThesisSearch | | OK |
| $adminAuthToken | validationType | testStudentThesis | | OK |
| $adminAuthToken | recordType | testStudentThesis | | OK |
| $adminAuthToken | presentationGroup | testStudentThesisPGroup | | OK |
| $adminAuthToken | presentationGroup | testStudentThesisOutputPGroup | | OK |
| $adminAuthToken | metadataGroup | testStudentThesisNewGroup | | OK |
| $adminAuthToken | metadataGroup | testStudentThesisGroup | | OK |
| $adminAuthToken | metadataGroup | testStudentThesisRecordInfoNewGroup | | OK |
| $adminAuthToken | metadataGroup | testStudentThesisRecordInfoGroup | | OK |
| $adminAuthToken | presentationVar | testTitlePVar | | OK |
| $adminAuthToken | presentationVar | testTitleOutputPVar | | OK |
| $adminAuthToken | metadataTextVariable | testTitleTextVar | | OK |
| $adminAuthToken | presentationRecordLink | testStudentThesisBelongsToPLink | | OK |
| $adminAuthToken | presentationRecordLink | testStudentThesisBelongsToOutputPLink | | OK |
| $adminAuthToken | metadataRecordLink | testStudentThesisBelongsToLink | | OK |
| $adminAuthToken | coraText | someFitnesseText | | OK |
| $adminAuthToken | coraText | someFitnesseDefText | | OK |

*!
!***> Update fitnesseUser and fitnesseAdmin, restoring old state

!| RecordEndpointFixture |
| authToken | type | id | json | testUpdateRecord? | getStatusType? |
| $adminAuthToken | systemOneUser | 121212 | {"children":[{"children":[{"name":"id","value":"121212"},{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"systemOneUser"}],"name":"type"},{"children":[{"name":"linkedRecordType","value":"systemOneUser"},{"name":"linkedRecordId","value":"131313"}],"name":"createdBy"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"name":"dataDivider"},{"name":"tsCreated","value":"2017-10-01T00:00:00.000000Z"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"141414"}],"name":"updatedBy"},{"name":"tsUpdated","value":"2018-04-11T08:56:47.811000Z"}],"name":"updated"},{"repeatId":"1","children":[{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"141414"}],"name":"updatedBy"},{"name":"tsUpdated","value":"2018-09-27 09:46:35.579"}],"name":"updated"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"systemOneUser"}],"name":"validationType"}],"name":"recordInfo"},{"name":"userId","value":"fitnesseUser@system.cora.uu.se"},{"name":"userFirstname","value":"Fitnesse"},{"name":"userLastname","value":"User"},{"repeatId":"7175775086411621","children":[{"children":[{"name":"linkedRecordType","value":"permissionRole"},{"name":"linkedRecordId","value":"fitnesseTextAdmin"}],"name":"userRole"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"collectPermissionTerm"},{"name":"linkedRecordId","value":"systemPermissionTerm"}],"name":"rule"},{"repeatId":"0","name":"value","value":"system.*"}],"name":"permissionTermRulePart"}],"name":"userRole"},{"name":"activeStatus","value":"active"},{"repeatId":"7175775086411619","children":[{"children":[{"name":"linkedRecordType","value":"appToken"},{"name":"linkedRecordId","value":"appToken:7175774276485719"}],"name":"appTokenLink"},{"name":"note","value":"For fitnesse"}],"name":"userAppTokenGroup"}],"name":"user"} | | OK |
| $adminAuthToken | systemOneUser | 131313 | {"children":[{"children":[{"name":"id","value":"131313"},{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"systemOneUser"}],"name":"type"},{"children":[{"name":"linkedRecordType","value":"systemOneUser"},{"name":"linkedRecordId","value":"12345"}],"name":"createdBy"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"name":"dataDivider"},{"name":"tsCreated","value":"2017-10-01T00:00:00.000000Z"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"141414"}],"name":"updatedBy"},{"name":"tsUpdated","value":"2018-04-11T08:56:43.010000Z"}],"name":"updated"},{"repeatId":"1","children":[{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"141414"}],"name":"updatedBy"},{"name":"tsUpdated","value":"2018-09-27T09:46:09.781000Z"}],"name":"updated"},{"repeatId":"2","children":[{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"141414"}],"name":"updatedBy"},{"name":"tsUpdated","value":"2018-09-27 12:47:30.003"}],"name":"updated"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"systemOneUser"}],"name":"validationType"}],"name":"recordInfo"},{"name":"userId","value":"fitnesseAdmin@system.cora.uu.se"},{"name":"userFirstname","value":"Fitnesse"},{"name":"userLastname","value":"Admin"},{"repeatId":"1","children":[{"children":[{"name":"linkedRecordType","value":"permissionRole"},{"name":"linkedRecordId","value":"everything"}],"name":"userRole"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"collectPermissionTerm"},{"name":"linkedRecordId","value":"systemPermissionTerm"}],"name":"rule"},{"repeatId":"0","name":"value","value":"system.*"}],"name":"permissionTermRulePart"}],"name":"userRole"},{"name":"activeStatus","value":"active"},{"repeatId":"3603423986672","children":[{"children":[{"name":"linkedRecordType","value":"appToken"},{"name":"linkedRecordId","value":"appToken:3603190243788"}],"name":"appTokenLink"},{"name":"note","value":"JsClient"}],"name":"userAppTokenGroup"}],"name":"user"} | | OK |

*!
!***> Delete permission units

!| RecordEndpointFixture |
| authToken | type | id | testDeleteRecord? | getStatusType? |
| $adminAuthToken | permissionUnit | my.test.unit | | OK |
| $adminAuthToken | permissionUnit | my.other.test.unit | | OK |
| $adminAuthToken | permissionUnit | some.other.test.unit | | OK |
| $adminAuthToken | collectPermissionTerm | testPermissionUnitPermissionTerm | | OK |
| $adminAuthToken | collectPermissionTerm | testSomeOtherPermissionTerm | | OK |

*!
