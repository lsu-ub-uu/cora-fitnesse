---
Static
---
!2 Create
 * '''Case 1:''' It must be possible to store a new record in the archive
 	* Change recordType to storeInArchive (SHOULD BE TESTED SOMEWHERE ELSE)
!***> Update storeInArchive for Demo recordType 
!include -seamless .HelperPages.defineAdminAuthToken 

!define updateDemoRecordType {!-{"children":[{"children":[{"name":"linkedRecordType","value":"metadataGroup"},{"name":"linkedRecordId","value":"demoGroup"}],"name":"metadataId"},{"name":"abstract","value":"false"},{"children":[{"name":"id","value":"demo"},{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"recordType"}],"name":"type"},{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"141414"}],"name":"createdBy"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}],"name":"dataDivider"},{"name":"tsCreated","value":"2018-08-29T14:09:07.043000Z"},{"repeatId":"0","children":[{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"141414"}],"name":"updatedBy"},{"name":"tsUpdated","value":"2018-08-29T14:09:07.043000Z"}],"name":"updated"},{"repeatId":"1","children":[{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"141414"}],"name":"updatedBy"},{"name":"tsUpdated","value":"2019-01-21T10:31:58.129000Z"}],"name":"updated"},{"repeatId":"2","children":[{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"141414"}],"name":"updatedBy"},{"name":"tsUpdated","value":"2019-01-23T13:26:06.700000Z"}],"name":"updated"},{"repeatId":"3","children":[{"children":[{"name":"linkedRecordType","value":"user"},{"name":"linkedRecordId","value":"141414"}],"name":"updatedBy"},{"name":"tsUpdated","value":"2022-03-24T15:15:27.748031Z"}],"name":"updated"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"recordType"}],"name":"validationType"}],"name":"recordInfo"},{"children":[{"name":"linkedRecordType","value":"presentationGroup"},{"name":"linkedRecordId","value":"demoOutputPGroup"}],"name":"presentationViewId"},{"children":[{"name":"linkedRecordType","value":"presentationGroup"},{"name":"linkedRecordId","value":"demoPGroup"}],"name":"presentationFormId"},{"children":[{"name":"linkedRecordType","value":"metadataGroup"},{"name":"linkedRecordId","value":"demoNewGroup"}],"name":"newMetadataId"},{"children":[{"name":"linkedRecordType","value":"presentationGroup"},{"name":"linkedRecordId","value":"demoNewPGroup"}],"name":"newPresentationFormId"},{"children":[{"name":"linkedRecordType","value":"presentationGroup"},{"name":"linkedRecordId","value":"demoMenuPGroup"}],"name":"menuPresentationViewId"},{"children":[{"name":"linkedRecordType","value":"presentationGroup"},{"name":"linkedRecordId","value":"demoListPGroup"}],"name":"listPresentationViewId"},{"name":"userSuppliedId","value":"true"},{"children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"demoText"}],"name":"textId"},{"children":[{"name":"linkedRecordType","value":"coraText"},{"name":"linkedRecordId","value":"demoDefText"}],"name":"defTextId"},{"children":[{"name":"linkedRecordType","value":"search"},{"name":"linkedRecordId","value":"demoSearch"}],"name":"search"},{"children":[{"name":"linkedRecordType","value":"presentationGroup"},{"name":"linkedRecordId","value":"demoAutocompletePGroup"}],"name":"autocompletePresentationView"},{"repeatId":"0","name":"groupOfRecordType","value":"other"},{"name":"public","value":"false"},{"name":"storeInArchive","value":"true"}],"name":"recordType"}-!}

!define recordType {recordType}
!define recordId {demo}
!define updateData updateDemoRecordType
!define expectedAnswer {}
!define expectedUpdateResult {OK}

!include -seamless .HelperPages.updateRecord
*!

!***> '''Case 1'''
Show file structure before storing a new record
!include -seamless .HelperPages.archiveFile

!define createDemoRecord {!-{"children":[{"children":[{"name":"id","value":"demo:$tempDemoId"},{"children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"cora"}],"name":"dataDivider"},{"children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"demo"}],"name":"validationType"}],"name":"recordInfo"},{"name":"bookTitle","value":"Harry Potter"}],"name":"book"}-!}

!define recordType {demo}
!define createData createDemoRecord
!define expectedAnswer {}
!define expectedCreateResult {CREATED}
!define archiveFileName {demo:demo:$tempDemoId}
!define archiveVersion1 {v1}
!define archiveVersion2 {v1}

!include -seamless .HelperPages.createRecord

!include -seamless .HelperPages.showFileVersion

Show file structure after storing a new record
!include -seamless .HelperPages.archiveFile
*!
