---
Static
---
!2 Update
 * '''Case 1:''' It must be possible to update an already stored record in the archive
 	* Change recordType to storeInArchive (SHOULD BE TESTED SOMEWHERE ELSE)

!***> '''Case 1'''
!define expectedAnswer {}
!define expectedCreateResult {OK}

Show file structure before storing a new record
!include -seamless .HelperPages.archiveFile

!define updateDemoRecord {!-{"name":"fitnesseExample","children":[{"name":"recordInfo","children":[{"name":"dataDivider","children":[{"name":"linkedRecordType","value":"system"},{"name":"linkedRecordId","value":"testSystem"}]},{"name":"id","value":"$tmpRecordId1"},{"children":[{"name":"linkedRecordType","value":"recordType"},{"name":"linkedRecordId","value":"fitnesseRecordType"}],"name":"type"},{"name":"validationType","children":[{"name":"linkedRecordType","value":"validationType"},{"name":"linkedRecordId","value":"fitnesseValidationType"}]}]},{"repeatId":"0","name":"fitnesseTextVar","value":"myUpdatedRecordInArchive"}]}-!}

!define recordType {fitnesseRecordType}
!define recordId {$tmpRecordId1}
!define updateData updateDemoRecord

!include -seamless .HelperPages.updateRecord

!define archiveFileName {fitnesseRecordType:$tmpRecordId1}
!define archiveVersion1 {v1}
!define archiveVersion2 {v2}

!include -seamless .HelperPages.showFileVersion

Show file structure after storing a new record
!include -seamless .HelperPages.archiveFile

!define xmlFilev1 {!-<?xml version="1.0" encoding="UTF-8"?><book><recordInfo><id>$tmpRecordId1</id><dataDivider><linkedRecordType>system</linkedRecordType><linkedRecordId>cora</linkedRecordId></dataDivider><type><linkedRecordType>recordType</linkedRecordType><linkedRecordId>demo</linkedRecordId></type><createdBy><linkedRecordType>user</linkedRecordType><linkedRecordId>131313</linkedRecordId></createdBy><updated repeatId="0"><updatedBy><linkedRecordType>user</linkedRecordType><linkedRecordId>131313</linkedRecordId></updatedBy></updated></recordInfo><bookTitle>Harry Potter</bookTitle></book>-!}
!define xmlFilev2 {!-<?xml version="1.0" encoding="UTF-8"?><book><recordInfo><id>$tmpRecordId2</id><type><linkedRecordType>recordType</linkedRecordType><linkedRecordId>demo</linkedRecordId></type><dataDivider><linkedRecordType>system</linkedRecordType><linkedRecordId>cora</linkedRecordId></dataDivider><updated repeatId="0"><updatedBy><linkedRecordType>user</linkedRecordType><linkedRecordId>131313</linkedRecordId></updatedBy></updated><updated repeatId="1"><updatedBy><linkedRecordType>user</linkedRecordType><linkedRecordId>131313</linkedRecordId></updatedBy></updated><createdBy><linkedRecordType>user</linkedRecordType><linkedRecordId>131313</linkedRecordId></createdBy></recordInfo><bookTitle>Harry Potter</bookTitle><keeptHis>3</keeptHis><url>https://www.svt.se/</url></book>-!}
!| ArchiveFileComparer |
| basePath | version | fileName | xmlCompareWith | getXmlComparerWith? | compare? |
| ${archiveFileSystemPath} | v1 | ${archiveFileName}|${xmlFilev1}||OK|
| ${archiveFileSystemPath} | v2 | ${archiveFileName}|${xmlFilev2}||OK|
*!
