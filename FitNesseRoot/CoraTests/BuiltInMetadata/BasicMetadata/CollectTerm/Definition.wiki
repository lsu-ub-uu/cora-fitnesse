---
Static
---
!3 Definition for Record type
!*< Setup record type definition
!define collectTermGroupDefinition {!-collectTerm type:{index, permission, storage} (group)
	recordInfo (group, 1-1, noConstraint)
		id (textVariable, 1-1, noConstraint, I)
		type (recordLink, 1-1, noConstraint)
		validationType (recordLink, 1-1, noConstraint)
		dataDivider (recordLink, 1-1, noConstraint, P, I)
		createdBy (recordLink, 1-1, noConstraint)
		permissionUnit (recordLink, 0-X, noConstraint)
		tsCreated (textVariable, 1-1, noConstraint)
		updated (group, 1-X, noConstraint)
			updatedBy (recordLink, 1-1, noConstraint)
			tsUpdated (textVariable, 1-1, noConstraint)
	nameInData (textVariable, 0-1, noConstraint)
	extraData (group, 1-1, noConstraint)
		indexFieldName (textVariable, 0-1, noConstraint)
		indexType (collectionVariable, 0-1, noConstraint)
		permissionKey (textVariable, 0-1, noConstraint)
		mode (collectionVariable, 0-1, noConstraint)
		storageKey (textVariable, 0-1, noConstraint)-!}
		
!define collectPermissionTermNewGroupDefinition {!-collectPermissionTerm type:{permission} (group)
	recordInfo (group, 1-1, noConstraint)
		id (textVariable, 1-1, noConstraint, I)
		validationType (recordLink, 1-1, noConstraint)
		dataDivider (recordLink, 1-1, noConstraint, P)
	nameInData (textVariable, 1-1, noConstraint)
	extraData (group, 1-1, noConstraint)
		permissionKey (textVariable, 1-1, noConstraint)
		mode (collectionVariable, 1-1, noConstraint)-!}
		
!define collectPermissionTermGroupDefinition {!-collectPermissionTerm type:{permission} (group)
	recordInfo (group, 1-1, noConstraint)
		id (textVariable, 1-1, noConstraint, I)
		type (recordLink, 1-1, noConstraint)
		validationType (recordLink, 1-1, noConstraint)
		dataDivider (recordLink, 1-1, noConstraint, P, I)
		createdBy (recordLink, 1-1, noConstraint)
		permissionUnit (recordLink, 0-X, noConstraint)
		tsCreated (textVariable, 1-1, noConstraint)
		updated (group, 1-X, noConstraint)
			updatedBy (recordLink, 1-1, noConstraint)
			tsUpdated (textVariable, 1-1, noConstraint)
	nameInData (textVariable, 1-1, noConstraint)
	extraData (group, 1-1, noConstraint)
		permissionKey (textVariable, 1-1, noConstraint)
		mode (collectionVariable, 1-1, noConstraint)-!}

!define collectIndexTermNewGroupDefinition {!-collectTerm type:{index} (group)
	recordInfo (group, 1-1, noConstraint)
		id (textVariable, 1-1, noConstraint, I)
		validationType (recordLink, 1-1, noConstraint)
		dataDivider (recordLink, 1-1, noConstraint, P)
	nameInData (textVariable, 1-1, noConstraint)
	extraData (group, 1-1, noConstraint)
		indexFieldName (textVariable, 1-1, noConstraint)
		indexType (collectionVariable, 1-1, noConstraint)-!}
		
!define collectIndexTermGroupDefinition {!-collectTerm type:{index} (group)
	recordInfo (group, 1-1, noConstraint)
		id (textVariable, 1-1, noConstraint, I)
		type (recordLink, 1-1, noConstraint)
		validationType (recordLink, 1-1, noConstraint)
		dataDivider (recordLink, 1-1, noConstraint, P, I)
		createdBy (recordLink, 1-1, noConstraint)
		permissionUnit (recordLink, 0-X, noConstraint)
		tsCreated (textVariable, 1-1, noConstraint)
		updated (group, 1-X, noConstraint)
			updatedBy (recordLink, 1-1, noConstraint)
			tsUpdated (textVariable, 1-1, noConstraint)
	nameInData (textVariable, 1-1, noConstraint)
	extraData (group, 1-1, noConstraint)
		indexFieldName (textVariable, 1-1, noConstraint)
		indexType (collectionVariable, 1-1, noConstraint)-!}

!define collectStorageTermNewGroupDefinition {!-collectStorageTerm type:{storage} (group)
	recordInfo (group, 1-1, noConstraint)
		id (textVariable, 1-1, noConstraint, I)
		validationType (recordLink, 1-1, noConstraint)
		dataDivider (recordLink, 1-1, noConstraint, P)
	extraData (group, 1-1, noConstraint)
		storageKey (textVariable, 1-1, noConstraint)-!}
		
!define collectStorageTermGroupDefinition {!-collectStorageTerm type:{storage} (group)
	recordInfo (group, 1-1, noConstraint)
		id (textVariable, 1-1, noConstraint, I)
		type (recordLink, 1-1, noConstraint)
		validationType (recordLink, 1-1, noConstraint)
		dataDivider (recordLink, 1-1, noConstraint, P, I)
		createdBy (recordLink, 1-1, noConstraint)
		permissionUnit (recordLink, 0-X, noConstraint)
		tsCreated (textVariable, 1-1, noConstraint)
		updated (group, 1-X, noConstraint)
			updatedBy (recordLink, 1-1, noConstraint)
			tsUpdated (textVariable, 1-1, noConstraint)
	extraData (group, 1-1, noConstraint)
		storageKey (textVariable, 1-1, noConstraint)-!}
*!
{{{ ${collectTermGroupDefinition} }}}
!***> '''Validate record type collectTerm'''
!| CheckRecordTypeFixture |
| id | assertDefinitionIs? |
| collectTerm | ${collectTermGroupDefinition} |
*!

!2 Collect permission term
create
{{{ ${collectPermissionTermNewGroupDefinition} }}}
update
{{{ ${collectPermissionTermGroupDefinition} }}}
!***> '''Validate validation type collectPermissionTerm'''
!***> Validate validaton type exists
!| RecordEndpointFixture |
| authToken | type | id | testReadRecordAndStoreJson? | getStatusType? |
| $adminAuthToken | validationType | collectPermissionTerm | | OK |
*!
!***> Validate the definition of metadata
!| DefinitionCompareFixture |
| recordId | getDefinitionView? |
| collectPermissionTermNewGroup | ${collectPermissionTermNewGroupDefinition} |
| collectPermissionTermGroup | ${collectPermissionTermGroupDefinition} |
*!
*!

!2 Collect index term
create
{{{ ${collectIndexTermNewGroupDefinition} }}}
update
{{{ ${collectIndexTermGroupDefinition} }}}
!***> '''Validate validation type collectIndexTerm'''
!***> Validate validaton type exists
!| RecordEndpointFixture |
| authToken | type | id | testReadRecordAndStoreJson? | getStatusType? |
| $adminAuthToken | validationType | collectIndexTerm | | OK |
*!
!***> Validate the definition of metadata
!| DefinitionCompareFixture |
| recordId | getDefinitionView? |
| collectIndexTermNewGroup | ${collectIndexTermNewGroupDefinition} |
| collectIndexTermGroup | ${collectIndexTermGroupDefinition} |
*!
*!

!2 Collect storage term
create
{{{ ${collectStorageTermNewGroupDefinition} }}}
update
{{{ ${collectStorageTermGroupDefinition} }}}
!***> '''Validate validation type collectStorageTerm'''
!***> Validate validaton type exists
!| RecordEndpointFixture |
| authToken | type | id | testReadRecordAndStoreJson? | getStatusType? |
| $adminAuthToken | validationType | collectStorageTerm | | OK |
*!
!***> Validate the definition of metadata
!| DefinitionCompareFixture |
| recordId | getDefinitionView? |
| collectStorageTermNewGroup | ${collectStorageTermNewGroupDefinition} |
| collectStorageTermGroup | ${collectStorageTermGroupDefinition} |
*!
*!

